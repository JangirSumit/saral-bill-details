<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Saral Bill Details</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <div class="connection-status">
      <div class="status-dot" id="statusDot"></div>
      <span id="statusText">Checking connection...</span>
    </div>
    
    <div class="tabs">
      <button class="tab-btn active" data-tab="setup">Setup</button>
      <button class="tab-btn" data-tab="processing">Processing</button>
      <button class="tab-btn" data-tab="help">Help</button>
    </div>
    
    <div class="tab-content" id="setupTab">
      <div class="section">
      <div class="setup-header">
        <h3>Bill Setup</h3>
        <button id="refreshBtn" class="refresh-icon" title="Refresh All">üîÑ</button>
      </div>
      <div class="bill-setup">
        <div class="service-type">
          <label class="radio-label">
            <input type="radio" name="serviceType" value="electricity" checked>
            <span class="radio-custom"></span>
            Electricity Boards
          </label>
          <label class="radio-label">
            <input type="radio" name="serviceType" value="apartments">
            <span class="radio-custom"></span>
            Apartments
          </label>
        </div>
        
        <div class="form-fields">
          <div class="field-group">
            <div class="input-wrapper">
              <input type="text" id="stateInput" required autocomplete="off" readonly>
              <label>State</label>
              <i class="dropdown-icon">‚ñº</i>
            </div>
            <div class="dropdown" id="stateDropdown">
              <ul>
                <li data-value="Andhra Pradesh">Andhra Pradesh</li>
                <li data-value="Arunachal Pradesh">Arunachal Pradesh</li>
                <li data-value="Assam">Assam</li>
                <li data-value="Bihar">Bihar</li>
                <li data-value="Chandigarh">Chandigarh</li>
                <li data-value="Chhattisgarh">Chhattisgarh</li>
                <li data-value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</li>
                <li data-value="Goa">Goa</li>
                <li data-value="Gujarat">Gujarat</li>
                <li data-value="Haryana">Haryana</li>
                <li data-value="Himachal Pradesh">Himachal Pradesh</li>
                <li data-value="Jammu & Kashmir">Jammu & Kashmir</li>
                <li data-value="Jharkhand">Jharkhand</li>
                <li data-value="Karnataka">Karnataka</li>
                <li data-value="Kerala">Kerala</li>
                <li data-value="Lakshadweep">Lakshadweep</li>
                <li data-value="Madhya Pradesh">Madhya Pradesh</li>
                <li data-value="Maharashtra">Maharashtra</li>
                <li data-value="Manipur">Manipur</li>
                <li data-value="Meghalaya">Meghalaya</li>
                <li data-value="Mizoram">Mizoram</li>
                <li data-value="Nagaland">Nagaland</li>
                <li data-value="New Delhi">New Delhi</li>
                <li data-value="Odisha">Odisha</li>
                <li data-value="Pondicherry">Pondicherry</li>
                <li data-value="Punjab">Punjab</li>
                <li data-value="Rajasthan">Rajasthan</li>
                <li data-value="Sikkim">Sikkim</li>
                <li data-value="Tamil Nadu">Tamil Nadu</li>
                <li data-value="Telangana">Telangana</li>
                <li data-value="Tripura">Tripura</li>
                <li data-value="Uttar Pradesh">Uttar Pradesh</li>
                <li data-value="Uttarakhand">Uttarakhand</li>
                <li data-value="West Bengal">West Bengal</li>
              </ul>
            </div>
          </div>
          
          <div class="field-group">
            <div class="input-wrapper">
              <input type="text" id="boardInput" required autocomplete="off" readonly>
              <label>Electricity Board</label>
              <i class="dropdown-icon">‚ñº</i>
            </div>
            <div class="dropdown" id="boardDropdown">
              <ul id="boardList"></ul>
            </div>
          </div>
          
          <div class="field-group" id="districtGroup" style="display: none;">
            <div class="input-wrapper">
              <input type="text" id="districtInput" autocomplete="off" readonly>
              <label>District/Type</label>
              <i class="dropdown-icon">‚ñº</i>
            </div>
            <div class="dropdown" id="districtDropdown">
              <ul id="districtList"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Search Mode</h3>
      <div class="mode-selector">
        <label><input type="radio" name="mode" value="single" checked> Single Consumer</label>
        <label><input type="radio" name="mode" value="bulk"> Bulk CSV Upload</label>
      </div>
    </div>

    <div class="section" id="singleSection">
      <h3>Consumer Number</h3>
      <input type="number" id="singleConsumerInput" placeholder="Enter consumer number">
    </div>

    <div class="section" id="bulkSection" style="display: none;">
      <h3>Upload CSV File</h3>
      <input type="file" id="fileInput" accept=".csv">
      <div id="fileStatus" class="status"></div>
      <div class="help-note">
        <span>üìã For CSV format and sample file, check </span>
        <button id="goToHelpBtn" class="link-btn">Help Tab</button>
      </div>
    </div>

      </div>
    </div>
    
    <div class="tab-content" id="processingTab" style="display: none;">
      <div class="section" id="controlSection" style="display: none;">
        <h3>Process Bills</h3>
        <div class="controls">
          <button id="startBtn" class="btn-primary">Start Processing</button>
          <button id="pauseBtn" class="btn-secondary" disabled>Pause</button>
          <button id="stopBtn" class="btn-secondary" disabled>Stop</button>
        </div>
        <div id="progress" class="progress">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="timer-display" id="timerDisplay" style="display: none;">
          <span>‚è±Ô∏è Time: </span><span id="timerText">00:00</span>
        </div>
        <div class="stats-display" id="statsDisplay" style="display: none;">
          <span>üìä Total: <span id="totalCount">0</span> | Remaining: <span id="remainingCount">0</span> | Success: <span id="successCount">0</span> | Failed: <span id="failedCount">0</span></span>
        </div>
        <div id="status" class="status"></div>
      </div>

      <div class="section" id="resultsSection" style="display: none;">
        <button id="downloadBtn" class="btn-primary">Download Results</button>
      </div>

      <div class="section consumer-section" id="consumerSection" style="display: none;">
        <div class="consumer-header">
          <h3>Consumer List</h3>
          <button id="downloadIconBtn" class="download-icon" title="Download Results" style="display: none;">‚¨á</button>
        </div>
        <div id="consumerList" class="consumer-list"></div>
      </div>
    </div>
    
    <div class="tab-content help-tab" id="helpTab" style="display: none;">
      <div class="section">
        <h3>CSV File Format</h3>
        <div class="help-content">
          <p>Required columns:</p>
          <ul>
            <li><strong>reference</strong> - Reference number for tracking (optional)</li>
            <li><strong>consumerNumber</strong> - The electricity consumer number</li>
            <li><strong>name</strong> - Consumer name (optional)</li>
            <li><strong>state</strong> - State name (optional, uses setup default if not provided)</li>
            <li><strong>board</strong> - Electricity board name (optional, uses setup default if not provided)</li>
            <li><strong>district</strong> - District/Type for Uttar Pradesh UPPCL (required for UP UPPCL)</li>
          </ul>
          <p>Example CSV:</p>
          <div class="code-block">
reference,consumerNumber,name,state,board,district<br>
REF001,1234567890,John Doe,Maharashtra,Mahavitran - Maharastra (MSEDCL),<br>
REF002,0987654321,Jane Smith,Uttar Pradesh,Uttar Pradesh Power (UPPCL),Agra - DVVNL
          </div>
          <button id="downloadSampleBtn" class="btn-primary" style="margin-top: 10px;">Download Sample CSV</button>
        </div>
      </div>
      
      <div class="section boards-section">
        <h3>Available States & Boards</h3>
        <div id="boardsReference" class="boards-reference">
          <p>Loading boards...</p>
        </div>
      </div>
    </div>
  </div>
  
  <script src="sidepanel.js"></script>
</body>
</html>